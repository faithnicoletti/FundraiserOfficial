{% extends 'base.html' %}

{% block content %}
<br>
<h1 style="color:#4F6367;">Change Password for <span style="color:#FE5F55;">{{ user.username }}</span></h1>

<form id="change-password-form" action="" method="POST">
  {% csrf_token %}
  {{ form.as_p }}
  
  <input type="submit" value="Change Password" class="btn" style="background-color:#FE5F55;">
</form>

<p id="success-message" style="display: none; color: green;">Password successfully changed!</p>

<script>
  // Add event listener for form submission
  document.getElementById("change-password-form").addEventListener("submit", function(event) {
    // Show success message
    document.getElementById("success-message").style.display = "block";
    
    // Prevent default form submission behavior
    event.preventDefault();
    
    // Redirect to profile page after a short delay (if needed)
    setTimeout(function() {
      window.location.href = "{% url 'profile' %}";
    }, 2000); // Redirect after 2 seconds (adjust as needed)
  });
</script>

{% endblock %}